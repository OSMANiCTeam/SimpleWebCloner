import{S as ee,i as te,s as le,v as se,w as oe,x as fe,p as q,n as z,A as ue,e as m,t as A,j as h,k as x,c as k,a as U,g as R,d as l,l as w,b as y,f,G as F,o as ie,u as re,m as ae,_ as G,R as M,H as C,Z as ne,U as pe,I as ce}from"../chunks/vendor-df32a748.js";import{F as _e}from"../chunks/Failure-11946e36.js";function $(p){let s,u;return s=new _e({props:{title:"Oh no!",description:"No!! An error occurred!"}}),{c(){se(s.$$.fragment)},l(a){oe(s.$$.fragment,a)},m(a,o){fe(s,a,o),u=!0},i(a){u||(q(s.$$.fragment,a),u=!0)},o(a){z(s.$$.fragment,a),u=!1},d(a){ue(s,a)}}}function be(p){let s,u,a,o,S,b,i,c,E,B,v,N,d,I,P,L,O,r,W,J,j,t,_,H,T,Y,Z,K,D=p[3]&&g(p);return{c(){s=m("label"),u=A("Busy?"),a=h(),o=m("input"),S=h(),b=m("br"),i=h(),c=m("label"),E=A("Studio ID:"),B=h(),v=m("input"),N=h(),d=m("br"),I=h(),P=m("label"),L=A("Working on a project?"),O=h(),r=m("input"),W=h(),J=m("br"),j=h(),D&&D.c(),t=h(),_=m("br"),H=h(),T=m("button"),Y=A("Save changes"),this.h()},l(e){s=k(e,"LABEL",{for:!0});var n=U(s);u=R(n,"Busy?"),n.forEach(l),a=w(e),o=k(e,"INPUT",{type:!0,class:!0}),S=w(e),b=k(e,"BR",{}),i=w(e),c=k(e,"LABEL",{for:!0});var Q=U(c);E=R(Q,"Studio ID:"),Q.forEach(l),B=w(e),v=k(e,"INPUT",{type:!0,class:!0}),N=w(e),d=k(e,"BR",{}),I=w(e),P=k(e,"LABEL",{for:!0});var V=U(P);L=R(V,"Working on a project?"),V.forEach(l),O=w(e),r=k(e,"INPUT",{type:!0,class:!0}),W=w(e),J=k(e,"BR",{}),j=w(e),D&&D.l(e),t=w(e),_=k(e,"BR",{}),H=w(e),T=k(e,"BUTTON",{type:!0,class:!0});var X=U(T);Y=R(X,"Save changes"),X.forEach(l),this.h()},h(){y(s,"for","studio_id"),y(o,"type","checkbox"),y(o,"class","svelte-1v6059s"),y(c,"for","studio_id"),y(v,"type","number"),y(v,"class","text-black rounded-sm p-0.5 svelte-1v6059s"),y(P,"for","studio_id"),y(r,"type","checkbox"),y(r,"class","svelte-1v6059s"),y(T,"type","button"),y(T,"class","btn-primary")},m(e,n){f(e,s,n),F(s,u),f(e,a,n),f(e,o,n),o.checked=p[2],f(e,S,n),f(e,b,n),f(e,i,n),f(e,c,n),F(c,E),f(e,B,n),f(e,v,n),M(v,p[4]),f(e,N,n),f(e,d,n),f(e,I,n),f(e,P,n),F(P,L),f(e,O,n),f(e,r,n),r.checked=p[3],f(e,W,n),f(e,J,n),f(e,j,n),D&&D.m(e,n),f(e,t,n),f(e,_,n),f(e,H,n),f(e,T,n),F(T,Y),Z||(K=[C(o,"change",p[7]),C(v,"input",p[8]),C(r,"change",p[9]),C(T,"click",function(){ne(p[6])&&p[6].apply(this,arguments)})],Z=!0)},p(e,n){p=e,n&4&&(o.checked=p[2]),n&16&&G(v.value)!==p[4]&&M(v,p[4]),n&8&&(r.checked=p[3]),p[3]?D?D.p(p,n):(D=g(p),D.c(),D.m(t.parentNode,t)):D&&(D.d(1),D=null)},d(e){e&&l(s),e&&l(a),e&&l(o),e&&l(S),e&&l(b),e&&l(i),e&&l(c),e&&l(B),e&&l(v),e&&l(N),e&&l(d),e&&l(I),e&&l(P),e&&l(O),e&&l(r),e&&l(W),e&&l(J),e&&l(j),D&&D.d(e),e&&l(t),e&&l(_),e&&l(H),e&&l(T),Z=!1,pe(K)}}}function me(p){let s,u;return{c(){s=m("p"),u=A("Loading...")},l(a){s=k(a,"P",{});var o=U(s);u=R(o,"Loading..."),o.forEach(l)},m(a,o){f(a,s,o),F(s,u)},p:ce,d(a){a&&l(s)}}}function g(p){let s,u,a,o,S,b;return{c(){s=m("label"),u=A("Percentage done with project:"),a=h(),o=m("input"),this.h()},l(i){s=k(i,"LABEL",{for:!0});var c=U(s);u=R(c,"Percentage done with project:"),c.forEach(l),a=w(i),o=k(i,"INPUT",{type:!0,class:!0}),this.h()},h(){y(s,"for","studio_id"),y(o,"type","number"),y(o,"class","text-black rounded-sm p-0.5 svelte-1v6059s")},m(i,c){f(i,s,c),F(s,u),f(i,a,c),f(i,o,c),M(o,p[5]),S||(b=C(o,"input",p[10]),S=!0)},p(i,c){c&32&&G(o.value)!==i[5]&&M(o,i[5])},d(i){i&&l(s),i&&l(a),i&&l(o),S=!1,b()}}}function ke(p){let s,u,a,o,S,b,i,c,E,B,v,N,d,I,P,L,O,r=p[1]&&$();function W(t,_){return t[0]?me:be}let J=W(p),j=J(p);return{c(){s=m("h1"),u=A("Scratchinfo Dashboard"),a=h(),o=m("p"),S=A("Dashboard name inspired by ocular by @Jeffalo"),b=h(),i=m("a"),c=A("Log out"),E=h(),B=m("hr"),v=h(),N=m("h2"),d=A("Your You Page"),I=h(),r&&r.c(),P=h(),j.c(),L=x(),this.h()},l(t){s=k(t,"H1",{class:!0});var _=U(s);u=R(_,"Scratchinfo Dashboard"),_.forEach(l),a=w(t),o=k(t,"P",{});var H=U(o);S=R(H,"Dashboard name inspired by ocular by @Jeffalo"),H.forEach(l),b=w(t),i=k(t,"A",{class:!0,href:!0,role:!0});var T=U(i);c=R(T,"Log out"),T.forEach(l),E=w(t),B=k(t,"HR",{}),v=w(t),N=k(t,"H2",{class:!0});var Y=U(N);d=R(Y,"Your You Page"),Y.forEach(l),I=w(t),r&&r.l(t),P=w(t),j.l(t),L=x(),this.h()},h(){y(s,"class","text-3xl font-bold mb-2"),y(i,"class","btn-primary mt-0 mb-1"),y(i,"href","/logout"),y(i,"role","button"),y(N,"class","text-xl font-bold mb-2")},m(t,_){f(t,s,_),F(s,u),f(t,a,_),f(t,o,_),F(o,S),f(t,b,_),f(t,i,_),F(i,c),f(t,E,_),f(t,B,_),f(t,v,_),f(t,N,_),F(N,d),f(t,I,_),r&&r.m(t,_),f(t,P,_),j.m(t,_),f(t,L,_),O=!0},p(t,[_]){t[1]?r?_&2&&q(r,1):(r=$(),r.c(),q(r,1),r.m(P.parentNode,P)):r&&(ae(),z(r,1,1,()=>{r=null}),ie()),J===(J=W(t))&&j?j.p(t,_):(j.d(1),j=J(t),j&&(j.c(),j.m(L.parentNode,L)))},i(t){O||(q(r),O=!0)},o(t){z(r),O=!1},d(t){t&&l(s),t&&l(a),t&&l(o),t&&l(b),t&&l(i),t&&l(E),t&&l(B),t&&l(v),t&&l(N),t&&l(I),r&&r.d(t),t&&l(P),j.d(t),t&&l(L)}}}function ye(p,s,u){let a=!1,o=!0,S=!1,b,i=!1,c,E=0,B=async function(){};re(async()=>{u(0,o=!0),u(1,S=!1),u(2,b=!1),a=!window.localStorage.getItem("authToken"),a&&(window.location.href="/login"),u(6,B=async function(){(await fetch("/you/supa/you_api/func/set",{method:"POST",body:JSON.stringify({token:window.localStorage.getItem("authToken").toString(),studio:Number(c||"0"),busy:!!b,isWorkingOnProject:i,percentProjectDone:E})})).ok?u(1,S=!1):u(1,S=!0)});const P=await fetch("/you/supa/scratchlight/getUserToken",{method:"POST",body:JSON.stringify({token:window.localStorage.getItem("authToken").toString()})});P.ok||(window.localStorage.clear(),window.location.href="/login");const L=await P.json(),O=await fetch(`/you/supa/you_api/${L.username}`);if(u(0,o=!1),O.ok){const r=await O.json();u(4,c=r.data.studio),u(2,b=r.data.busy),u(3,i=r.data.workingOnProject),u(5,E=r.data.percentageDoneWithProject)}else console.log("Oh no! An error has occured.")});function v(){b=this.checked,u(2,b)}function N(){c=G(this.value),u(4,c)}function d(){i=this.checked,u(3,i)}function I(){E=G(this.value),u(5,E)}return[o,S,b,i,c,E,B,v,N,d,I]}class Se extends ee{constructor(s){super();te(this,s,ye,ke,le,{})}}export{Se as default};
